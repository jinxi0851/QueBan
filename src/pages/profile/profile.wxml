<!-- ä¸ªäººä¸­å¿ƒé¡µé¢æ¨¡æ¿ -->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section card">
    <view class="user-info" wx:if="{{user}}">
      <image 
        class="user-avatar" 
        src="{{user.avatarUrl || 'https://api.dicebear.com/7.x/avataaars/svg?seed=User'}}" 
        mode="aspectFill"
      />
      <view class="user-details">
        <text class="user-name">{{user.name || 'ç”¨æˆ·'}}</text>
        <text class="user-nickname" wx:if="{{user.nickName}}">{{user.nickName}}</text>
        <text class="user-type">{{user.type || 'æ™®é€šç”¨æˆ·'}}</text>
      </view>
    </view>
    
    <!-- æœªç™»å½•çŠ¶æ€ -->
    <view class="login-prompt" wx:else>
      <text class="login-text">è¯·å…ˆç™»å½•</text>
      <button class="btn btn-primary login-btn" bindtap="navigateToLogin">
        ç«‹å³ç™»å½•
      </button>
    </view>
  </view>

  <!-- ç»Ÿè®¡æ•°æ® -->
  <view class="stats-section card" wx:if="{{user}}">
    <view class="section-title">
      <text class="title-text">æˆ‘çš„æ•°æ®</text>
    </view>
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{stats.totalMenus}}</text>
        <text class="stat-label">ç”Ÿæˆèœå•</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.totalLikes}}</text>
        <text class="stat-label">è·å¾—ç‚¹èµ</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{stats.totalShares}}</text>
        <text class="stat-label">åˆ†äº«æ¬¡æ•°</text>
      </view>
    </view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="quick-actions card" wx:if="{{user}}">
    <view class="section-title">
      <text class="title-text">å¿«æ·åŠŸèƒ½</text>
    </view>
    <view class="action-list">
      <view class="action-item" bindtap="navigateToMyDishes">
        <text class="action-icon">ğŸ³</text>
        <text class="action-text">æˆ‘çš„æ‹¿æ‰‹èœ</text>
        <text class="action-arrow">â€º</text>
      </view>
      <view class="action-item" bindtap="navigateToFavorites">
        <text class="action-icon">ğŸ”–</text>
        <text class="action-text">æˆ‘çš„æ”¶è—</text>
        <text class="action-arrow">â€º</text>
      </view>
      <view class="action-item" bindtap="navigateToHistory">
        <text class="action-icon">ğŸ“œ</text>
        <text class="action-text">å†å²è®°å½•</text>
        <text class="action-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- èœå•å†å² -->
  <view class="history-section card" wx:if="{{user && menuHistory.length > 0}}">
    <view class="section-header">
      <text class="title-text">æœ€è¿‘èœå•</text>
      <view class="header-actions">
        <text class="clear-btn" bindtap="clearHistory">æ¸…é™¤</text>
      </view>
    </view>
    <view class="history-list">
      <view 
        class="history-item" 
        wx:for="{{menuHistory}}" 
        wx:key="index"
      >
        <view class="history-content">
          <text class="history-menu-name">{{item.name}}</text>
          <view class="history-meta">
            <text class="history-time">{{formatTime(item.createTime)}}</text>
            <text class="history-tags">{{item.tags.join(', ')}}</text>
          </view>
        </view>
        <text class="history-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®é€‰é¡¹ -->
  <view class="settings-section card">
    <view class="section-title">
      <text class="title-text">è®¾ç½®</text>
    </view>
    <view class="action-list">
      <view class="action-item" bindtap="navigateToSettings">
        <text class="action-icon">âš™ï¸</text>
        <text class="action-text">é€šç”¨è®¾ç½®</text>
        <text class="action-arrow">â€º</text>
      </view>
      <view class="action-item" bindtap="shareApp">
        <text class="action-icon">â†—</text>
        <text class="action-text">åˆ†äº«åº”ç”¨</text>
        <text class="action-arrow">â€º</text>
      </view>
      <view class="action-item" bindtap="logout" wx:if="{{user}}">
        <text class="action-icon">ğŸšª</text>
        <text class="action-text">é€€å‡ºç™»å½•</text>
        <text class="action-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨åŠ è½½...</text>
  </view>
</view>