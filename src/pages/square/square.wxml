<!-- å¹¿åœºé¡µé¢æ¨¡æ¿ -->
<view class="container">
  <!-- æ ‡ç­¾åˆ‡æ¢ -->
  <view class="tab-switch">
    <view 
      class="tab-item {{activeTab === 'hot' ? 'active' : ''}}" 
      data-tab="hot" 
      bindtap="switchTab"
    >
      <text class="tab-text">çƒ­é—¨</text>
    </view>
    <view 
      class="tab-item {{activeTab === 'new' ? 'active' : ''}}" 
      data-tab="new" 
      bindtap="switchTab"
    >
      <text class="tab-text">æœ€æ–°</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">æ­£åœ¨åŠ è½½...</text>
  </view>

  <!-- å¸–å­åˆ—è¡¨ -->
  <view class="posts-list" wx:else>
    <view 
      class="post-item card" 
      wx:for="{{posts}}" 
      wx:key="_id"
    >
      <!-- ç”¨æˆ·ä¿¡æ¯ -->
      <view class="post-header">
        <image 
          class="author-avatar" 
          src="{{item.authorAvatar}}" 
          mode="aspectFill"
        />
        <view class="author-info">
          <text class="author-name">{{item.authorName}}</text>
          <text class="post-time">{{item.createTime}}</text>
        </view>
      </view>

      <!-- èœå•ä¿¡æ¯ -->
      <view class="menu-content">
        <view class="menu-header">
          <text class="menu-name">{{item.menu.name}}</text>
          <view class="menu-tags">
            <text 
              class="tag" 
              wx:for="{{item.menu.tags}}" 
              wx:key="tagIndex"
              wx:for-item="tagItem"
            >
              {{tagItem}}
            </text>
          </view>
        </view>
        
        <view class="menu-meta">
          <text class="meta-item">{{item.menu.time}}</text>
          <text class="meta-item">{{item.menu.difficulty}}</text>
        </view>
        
        <view class="menu-message">
          <text class="message-text">{{item.menu.message}}</text>
        </view>
      </view>

      <!-- AIè¯„è®º -->
      <view class="ai-comment">
        <view class="comment-header">
          <text class="comment-icon">ğŸ¤–</text>
          <text class="comment-title">AIç‚¹è¯„</text>
        </view>
        <text class="comment-content">{{item.aiComment}}</text>
      </view>

      <!-- äº’åŠ¨æŒ‰é’® -->
      <view class="post-actions">
        <view 
          class="action-btn {{item.isLiked ? 'liked' : ''}}" 
          data-post-id="{{item._id}}" 
          bindtap="toggleLike"
        >
          <text class="action-icon">â™¥</text>
          <text class="action-text">{{item.likeCount}}</text>
        </view>
        
        <view 
          class="action-btn" 
          data-post-id="{{item._id}}" 
          bindtap="navigateToComments"
        >
          <text class="action-icon">ğŸ’¬</text>
          <text class="action-text">{{item.commentCount}}</text>
        </view>
        
        <view 
          class="action-btn {{item.isBookmarked ? 'bookmarked' : ''}}" 
          data-post-id="{{item._id}}" 
          bindtap="toggleBookmark"
        >
          <text class="action-icon">ğŸ”–</text>
          <text class="action-text">æ”¶è—</text>
        </view>
        
        <view 
          class="action-btn" 
          data-post-id="{{item._id}}" 
          bindtap="sharePost"
        >
          <text class="action-icon">â†—</text>
          <text class="action-text">åˆ†äº«</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && posts.length === 0}}">
    <text class="empty-icon">ğŸ½ï¸</text>
    <text class="empty-text">æš‚æ— å†…å®¹</text>
    <text class="empty-desc">å¿«æ¥åˆ†äº«ä½ çš„æ‹¿æ‰‹èœå§ï¼</text>
  </view>
</view>